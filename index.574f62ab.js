let news,isFetching=!1;localStorage.getItem("topic")||localStorage.setItem("topic","world");let page=1;document.addEventListener("DOMContentLoaded",(async function(){let e,t;document.getElementById("topic-select").value=localStorage.getItem("topic"),document.getElementById("topic-select").addEventListener("change",(function(e){let t=e.target.value;localStorage.setItem("topic",t)})),document.getElementById("main").addEventListener("scroll",(function(n){let a=n.target.scrollTop/(n.target.scrollHeight-n.target.clientHeight);t=a>e?"down":"up",e=n.target.scrollTop/(n.target.scrollHeight-n.target.clientHeight),console.log(t),a>.9&&!isFetching&&"down"==t&&(page++,fetchNews())})),window.indexedDB||console.log("Your browser doesn't support a stable version of IndexedDB. Such and such feature will not be available."),window.indexedDB.open("news",1).onerror=function(e){console.log("[Error]","Something went wrong while trying to open the local database.")},await fetchNews(),document.getElementsByClassName("loading")[0].style.opacity="0",document.getElementsByClassName("loading")[0].style.pointerEvents="none"})),window.trim=function(e,t){return e.length>t?e.substring(0,t)+"...":e},window.requestTopic=function(){let e=prompt("Enter a topic to search for\n(Current topic: "+localStorage.getItem("topic")+")");null!=e&&(e.match(/^\s*$/)||(localStorage.setItem("topic",e),location.reload()))},window.fetchNews=async function(){isFetching=!0,await fetch(`https://api.newscatcherapi.com/v2/latest_headlines?countries=US&lang=en&topic=${encodeURIComponent(localStorage.getItem("topic").toLocaleLowerCase())}&page_size=10&page=${page}`,{method:"GET",headers:{"x-api-key":"rKHk3vIV2Q8JyRKA373DdbpLJ5RlnQRxBND6cQxqKV8"}}).then((function(e){return e.json()})).then((function(e){news=e.articles,console.log(news);let t=[];for(let e=0;e<news.length;e++){if(news.includes(news[e].title))return;t.push(news[e].title);let n=`\n                <div class="item" onclick="window.open('${news[e].link}')">\n                    ${news[e].media?`<div class="item-img" style="background-image: url(${news[e].media})"></div>`:""}\n                    <div class="item-content">\n                        <div class="item-title">${trim(news[e].title,100)}</div>\n                        <div class="item-data">\n                            <span id="author"><img src="https://icons.duckduckgo.com/ip3/${news[e].clean_url}.ico" class="author-ico" alt="author icon"> ${news[e].author?news[e].author:news[e].clean_url}</span><br><span id="date">${news[e].published_date}</span>\n                        </div>\n                    </div>\n                </div>\n        `;document.getElementById("main").innerHTML+=n,isFetching=!1}}))},window.switchPage=function(e){if(["main","search","settings"].includes(e)){document.querySelector('[data-active="true"]').dataset.active="false",document.getElementById(e).dataset.active=!0}else console.log("[Error]","Page not found.");switch(e){case"main":document.getElementsByClassName("navbar")[0].innerHTML='\n            <div class="nav-left">\n            <div class="nav-title">\n                BoopNews\n            </div>\n            </div>\n            <div class="nav-right">\n                \x3c!-- <div class="nav-item material-symbols-outlined" id="nav-add" onclick="">add</div> --\x3e\n                <div class="nav-item material-symbols-outlined" id="nav-settings" onclick="switchPage(\'settings\')">settings</div>\n            </div>\n        ';break;case"search":document.getElementsByClassName("navbar")[0].innerHTML='\n            <div class="nav-left">\n            <div class="nav-back material-symbols-outlined" onclick="switchPage("main")">arrow_back</div>\n            <div class="nav-title">\n                Search\n            </div>\n            </div>\n            <div class="nav-right">\n            </div>\n        ';break;case"settings":document.getElementsByClassName("navbar")[0].innerHTML='\n            <div class="nav-left">\n            <div class="nav-back material-symbols-outlined" onclick="location.reload()">arrow_back</div>\n            <div class="nav-title">\n                Settings\n            </div>\n            </div>\n            <div class="nav-right">\n            </div>\n        '}};
//# sourceMappingURL=index.574f62ab.js.map
